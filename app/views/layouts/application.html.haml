%html
  %head
    %title Bsmi
    = stylesheet_link_tag    "application", :media => "all"
    = javascript_include_tag "application" 
    = csrf_meta_tags
    = yield :head
  %body
    .navbar.navbar-fixed-top
      .navbar-inner
        .container-fluid
          %a.btn.btn-navbar{"data-target" => ".nav-collapse", "data-toggle" => "collapse"}
            %span.icon-bar
            %span.icon-bar
            %span.icon-bar
          %a.brand{:href => "#"} CalTeach STePs
          .nav-collapse.collapse
            %ul.nav.pull-right
              - if current_user
                %li
                  %a{:href => logout_path} Logout
              - else
                %li
                  %a{:href => new_user_path} Register
                %li
                  %a{:href => login_path} Login
    .container-fluid      
      - if current_user
        - if current_user.owner_type == "Student"
       
          = render :partial => "student_view", :locals => { :current_user => current_user, :semester => semester }
        - elsif current_user.owner_type == "MentorTeacher"
          = render :partial => "mentor_teacher_view", :locals => { :current_user => current_user, :semester => semester }
        - elsif current_user.owner_type == "CalFaculty"
          = render :partial => "cal_faculty_view", :locals => { :current_user => current_user, :semester => semester }

        - elsif current_user.owner_type == "Advisor"
          = render :partial => "advisor_view", :locals => { :current_user => current_user, :semester => semester }

      .content.fixed-fixed
        - [:notice, :error, :error_list, :alert].each do |level| 
          - unless flash[level].blank?
            - if level == :notice
              .alert.alert-info 
                = flash[level]
            - elsif level == :error
              .alert.alert-error 
                = flash[level]
            - elsif level == :error_list
              .alert.alert-error
                %ul
                  - flash[level].each do |error|
                    %li
                      = error
            - else
              .alert.alert-block 
                = flash[level]
        = yield



